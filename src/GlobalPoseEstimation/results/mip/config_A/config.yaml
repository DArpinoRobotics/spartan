# For running the standalone version, we need pcg options:
point_cloud_generator_options:
    # Scene sampling mode 0 = center of each face
    # scene sampling mode 1 = num_rays surface points randomly uniformly across faces of specified model, or all of them (don't specify model)
    # scene sampling mode 2 = num_rays surface points, within sample_distance of a random vertex on specified model (or random model if unspecified)
    scene_sampling_mode: 1
    num_rays: 10 # if using random scene point sampling, sample this many points
    sample_distance: 0.05
    
    models:
       #- urdf: "models/urdf/cubes_jointed.urdf"
       #  q0: [0.1, 0, 0.5, 0.9, 0.5, 0.2, 0.2]
       - urdf: "../urdf/cubes.urdf"
         q0: [0.0, 0.0, 2.0, 0.9, 0.5, 0.2, 1.0, 1.0, 1.0, 0.8, 0.5, -0.2]
       #- urdf: "../urdf/cube.urdf"
       #  q0: [0.0, 0, 2.0, 0.9, 0.5, 0.2]


detector_options:
    detector_type: "world_to_body_transforms"
    #detector_type: "world_to_body_transforms_with_sampled_model_points"
    #detector_type: "body_to_world_transforms"

    downsample_spacing: 0.02 # for model and scene, where appropriate

    # options of rot constraints:
    # 0: constrained to ground truth
    # 1: unconstrained
    # 2: columnwise and row-wise L1-norm >= 1
    # 3: McCormick quaternion
    # 4: McCormick directly on rotmat
    # 5: Conservative RPY limits
    # 6: 2D Logarithmic McCormick
    rotation_constraint: 4
    rotation_constraint_num_faces: 2
    rotation_constraint_l1_bound: 0

    allow_outliers: true
    phi_max: 0.01
    use_initial_guess: false
    corruption_amount: 0
    init_guess_rand_seed: 1
    
    HOD_bins: 3
    HOD_dist: 0.05
    HOD_weight: 0.0

    big_M: 2.0

    max_dist_to_same_face: -1.0

    downsample_to_this_many_points: -1 # random downsampling -- not recommended
    add_this_many_outliers: 0
    outlier_min: [-2.0, -2.0, 0.0]
    outlier_max: [2.0, 2.0, 4.0]
    scene_point_additive_noise: 0.00
    scene_point_rand_seed: 3
    model_sample_rays: 100
    model_point_rand_seed: 1

    ICP_use_as_heuristic: true
    ICP_prior_weight: 0.01
    # We reject points 
    # this number times the average distance to
    # all other points
    ICP_outlier_rejection_proportion: 1.0
    ICP_max_iters: 500

    gurobi_int_options:
        #MIPFocus: 2
        #PoolSearchMode: 0
        #PoolSolutions: 20
        #SubMIPNodes: 1000
        Threads: 10

    gurobi_float_options:
        TimeLimit: 60
        #PoolGap: 0.0
        #FeasRelaxBigM: 4
        MIPGapAbs: 0.00001
        MIPGap: 0.005
        #Heuristics: 0.1 # Heuristics seem to do very well, so grant them more time (default 5% = 0.05)

       #- urdf: "models/urdf/bunny_99_faces.urdf"
       #  q0: [0.2, 0.2, 0.2, 1.57, 0.0, 0.0]
       #- urdf: "models/urdf/cubes_jointed.urdf"
       #  q0: [0.1, 0, 0.5, 0.9, 0.5, 0.2, 0.2]
       #- urdf: "models/urdf/cubes.urdf"
    #     q0: [0.0, 0.0, 2.0, 0.9, 0.5, 0.2, 1.0, 1.0, 1.0, 0.8, 0.5, -0.2]
       #- urdf: "models/urdf/cube.urdf"
       #  q0: [0.0, 0, 2.0, 0.9, 0.5, 0.2]